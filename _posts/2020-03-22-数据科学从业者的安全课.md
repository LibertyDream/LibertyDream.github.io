---
layout:		post
title:  	数据科学从业者的安全课
subtitle:   保护数据的实用技能
date:       2020-03-22
author:     一轩明月
header-img: img/post-bg-snow.jpg
catalog: 	 true
tags:
    - security
---

新的一天，新的事故。[Elasticsearch服务器数据泄漏](https://www.leiphone.com/news/201912/m4nT35S6zEJ7Mptv.html) 只是 2019 年一系列主要组织数据泄漏事件中最新的“篇章”。这一年里，[Facebook 用户的隐私](https://www.freebuf.com/news/221626.html)，[俄罗斯联邦储蓄银行的信用卡信息](https://www.zdnet.com/article/russias-sberbank-investigates-credit-card-data-leak/)，[优衣库的顾客信息](http://www.bjnews.com.cn/feature/2019/05/14/578836.html)，[丰田汽车的用户信息](https://tech.sina.com.cn/i/2019-04-01/doc-ihsxncvh7398707.shtml)都被“不情愿”地请出了闺房。更糟的是其中还有少数严重事故——[全球 7.37 亿医疗数据泄露，涉及 2000 多万人，波及 52 国](https://www.infoq.cn/article/8VZ8aVetNvRQ2VCmHl4u)。数据泄露事故发生的日益频繁，可以肯定的是在情况出现好转前只会变得更糟。

是否有些焦虑？很好，应该焦虑点了。保障数据安全已经不再是数据库管理员和网络工程师们的专属技能了。每一个生产、管理、分析乃至只是访问数据的人都有可能是组织安全方案中的潜在疏漏点。所以如果你所使用的数据十分敏感，那么任何数据都不能轻易交给网络中的陌生人，此时确保数据安全也是你所担负责任的一部分。任何时候都不能天真的认为别人会为我们的安全性操心。

多绝大多数数据科学家来说这都可能是一个陌生的领域，因为你的研究生学校或训练营都很少提及安全性问题。但是，不要为忽视数据安全找借口，特别是当一个小安全失误就可能毁掉你所做的一切的时候。如果你打算开始重视了，从哪里开始呢？

在操心数据科学相关内容之前，最好先进行一些基础安全检查，比如一些通用的[掌控网络账户与财产的最佳实践](https://security.berkeley.edu/resources/best-practices-how-to-articles/top-10-secure-computing-tips)。一点具体的建议：

- 使用（但不重用）复杂密码，使用 [LastPass](http://lastpass.com/) 或 [Dashlane](http://dashlane.com/) 之类的密码管理工具进行保管。
- 只要允许，就激活双重验证，[最好包括物理组件](https://medium.com/@msager/basic-personal-security-for-progressives-a-primer-e4babe419fcc)，比如身份验证应用或物理令牌。这样相较文本内容更难以被破解
- 不要触碰不安全的 wifi / 电脑/ U 盘/软件，时刻记得对任何可能遗失的便携设备都要加密（U 盘，便携硬件，手机，平板，笔记本电脑等等）
- 在公共 wifi 网络下使用 VPN 进行链接（[付费的不要免费的](http://lifehacker.com/5940565/why-you-should-start-using-a-vpn-and-how-to-choose-the-best-one-for-your-needs)，确保自己[研究](http://lifehacker.com/5935863/five-best-vpn-service-providers)过）
- 定期更新电脑和手机，使用反病毒/反恶意/防火墙软件（尽管得说这些工具的价值正不断地[遭受质疑](https://www.csoonline.com/article/3146996/malware-vulnerabilities/is-antivirus-software-dead-at-last.html)）
- 不要将你的账户资质信息存放在文本文件或嵌入到脚本当中
- 确保你的电脑，平板和手机实际意义上为你掌管，如果你偶然间将手机落在了桌子上，所付出的一切努力也就白费了

这些建议对一般只是发发邮件的用户来说足够了，但如果你是靠数据维持生计的，这只是起步。下面十条建议是从实践中总结出来的，有助于你成为负有安全素养的数据科学从业者：

1. **只拿自己需要的**。古老的间谍守则——只说“需要你知道的事”——同样是数据安全的第一信条。你不可能泄漏一开始就没得到的数据，所以除非你有必须承担风险的清晰需求，不要收集敏感数据。即使如此，也要保证只拿完成任务所需的最少量的数据。毕竟数据科学家们都习惯多收集点数据以防万一，而这种储备倾向就是小安全事故和大灾难间的差距，所以不要这么做。
2. **理解你所拥有的数据，当你不再需要的时候停止占有数据。**假设你手里有一些数据，首先确认这些数据是满足 #原则1 的。定期盘点手头上的数据，分析每个数据集的敏感性，丢掉那些你不需要的数据同时想办法降低占有数据的内在风险——比如说，删除或是编辑非结构化文本域内容，其中可能潜藏着姓名、电话这样的敏感信息。而且在你考虑数据敏感性的时候，不要只考虑自身利益：如果有其他人的数据，也要捎带处理。
3. **何时何地都要加密数据。**加密数据（[在用](https://www.techopedia.com/definition/32266/data-in-motion)，[静置](https://en.wikipedia.org/wiki/Data_at_rest)的都要）虽不具备我们期望中的银弹效果，但它确实增加保护层的一种低成本方案，能防止硬件或网络被破解。除非你所使用的应用需要超高性能，加密对性能的影响都可以忽略不计。所以如果你有敏感数据，默认就该被加密。而且性能并不是考量加密的决定性条件——大量的高性能应用和服务都有内置加密方案（比如这是微软 [Azure SQL Database 标准特性](https://docs.microsoft.com/en-us/sql/relational-databases/security/encryption/always-encrypted-database-engine)）。所以这个理由也变得越来越没说服力了。
4. **使用安全的分享服务，不要用邮件，网络服务器或者简单的 FTP 服务器。**传纸条，发个卡通画确实是简单快速分享文件的方式，但对共享敏感数据文件来说就风险很大了。相反地，要选择专为安全共享文件设计的专用服务，比如说 [AWS 上的受限 S3 桶](http://docs.aws.amazon.com/AmazonS3/latest/dev/s3-access-control.html)（这里可以管理和其他 AWS 用户分享的加密文件），或者 [SFTP 服务器](https://en.wikipedia.org/wiki/SSH_File_Transfer_Protocol#SFTP_server)（通过加密连接保证文件传输安全）即使只是换用 Dropbox 或者 Google Drive 都是改善。尽管这些服务不像其他工具那么专注于安全防护，相较于邮件传输和转储在最低安全限度的服务器上，他们仍旧提供了更好的基础安全保障（比如，Dropbox 和 Google 都会对空闲文档加密）和更细致的权限控制。如果想比 Google 或 Dropbox 更进一步，[SpiderOak One](https://spideroak.com/one/) 之类的的服务能对文件存储与共享提供端到端地加密，同时提供易用交互界面，价格也是几乎每个人都能接受（\$5/月 100 GB，\$12/月 1 TB）
5. **如果有在使用类似 AWS 或 Azure 的云服务，务必将其锁定**。不要幻想别人也在用服务器，所以自己不用操心安全问题。恰恰相反，有[一系列系统加固实践经验](http://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html)需要你了解。(同时建议看一看其他使用服务的用户的[建议](https://www.botmetric.com/blog/aws-cloud-security-best-practices-you-must-know/?doing_wp_cron=1504981384.0727748870849609375000)）其中包括打开服务器上 S3 桶和其他文件存储区以及安全端口的认证，这样只有你允许的人才能访问，还要对访问你的服务实例的方式进行限制，只允许验证过的 IP 地址或专用 VPN 管道进行访问。
6. **尽职地分享**。对敏感数据，要对用户（内部和外部都算）和数据集单独授权而不是批量授权，同时只在实际需要的时候给予授权（想想第一条，只不过这里是对别人）。同样地，要只给特定数据和特定时间段的访问权限（想想第二条）。让你的合作伙伴签署保密和数据使用协议，即使他们并不会受到惩罚，他们还是想看看别人会怎么处理你给了权限的数据。定期检查日志确保他们正在按期望方式使用
7. **安全不限于文件存储，还有应用，备份，解析服务器等等**。基本上任何接触到你数据的东西都要保障安全性。否则，你可能建起了数据库堡垒，但只因你的字符终端将所有数据缓存到了硬盘上且没被有效保护，所有努力都付之一炬。相似地，要记得你的系统备份时经常也会对你的文件进行备份，这些内容可能在你删除文件本体后依然存在（毕竟这本身就是备份要点）。所以这些备份内容不仅要被保护起来，一旦不需要了就要及时清除。否则他们就是黑客眼中被埋藏的宝藏了——你所有的一切就在备份磁盘上何必去打扰精心调教过的数据库呢？
8. **确保原始数据没被藏在你向他人分享的输出结果中**。一些机器学习模型会将数据打包并作为训练对象的一部分（比如从原始文档中抽取的词和短语），所以不经意地分享模型结果潜藏着泄露训练数据的风险。同理，控制面板，图像或是映射都可能将数据嵌入到了输出之中，只不过表面上你看到的都是聚合结果。即使你只是分享一张静态的图表图像，也有[工具](http://datathief.org/)能据此重建原始数据集。要清楚你在分享的是什么，想一想心怀不轨的人可以拿它来做什么
9. **理解“脱敏”或“匿名”数据（确保操作没问题）的内涵**。如果数据集并不需要个人身份信息（PII），那就显式地删掉那些字段降低潜在风险。如果要公开数据集，那这一步必不可少。但即使删掉了个人身份信息，也不能保证别人就无法探明谁是谁。通过其他的数据组合能否重新识别出相关信息呢？非个人身份信息是否独特到能指定具体的个体了呢？某个可笑的家伙告诉你[散列是个好主意](https://www.ftc.gov/news-events/blogs/techftc/2012/04/does-hashing-make-data-anonymous)，你是否信以为真？曾经有人收到过一份”匿名“消费者数据，结果没用两分钟就从中找到了自己的消费记录（年龄，种族，性别以及所在地居住时长构成了鉴别个体的唯一标识）。不难想见，不需要费多大力他就能查明其他人所对应的消费数据，如果配上选民登记文件（多数地方该记录是公开的），就可以将绝大部分记录和具体的人名、住址和生日进行对应起来。并不存在完美的脱敏规则，但如果你打算靠它保护隐私，个人强烈建议遵照卫生与公共服务部制定的[卫生信息脱敏条例](https://www.hhs.gov/hipaa/for-professionals/privacy/special-topics/de-identification/index.html)。当然，这并不保证一定能保护好隐私，但这是在数据可用的前提下最接近你所追求目标的选项。
10. **清楚最糟糕的境况会怎样**。即使已经做了所有的预防措施，你也不能彻底消除风险，所以仔细想想如果数据泄露之后可能面临的最糟糕场面是什么样的。想清楚以后，回顾 #1 和 #2 两条建议。无论怎样殚精竭虑防止泄露，阻止破解，没有哪个方案能保证万无一失，如果无法承受潜在的风险那么一开始就不要保留敏感数据

要知道这些方法无法免除所有危机，如果有国家力量支持的黑客小组正尝试破解进入，那你大概算是遇到了劲敌。（这也是将建议 #1 放在第一条的原因——没什么值得黑是保障安全的唯一方法）。但对于 99.9% 的数据科学家来说，对他们数据感兴趣的都是些二流黑客，这些建议足以覆盖绝大多数你所应知道的课题。这并不意味着结束，想办法把这些事情做好还有很长的路要走，但至少你已经走在了称职数据看护者的道路上。